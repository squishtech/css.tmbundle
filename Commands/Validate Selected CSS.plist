<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>beforeRunningCommand</key>
	<string>nop</string>
	<key>command</key>
	<string>"${TM_RUBY:=ruby}" -e "
print '&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\"Refresh\" content=\"0; URL='
print 'http://jigsaw.w3.org/css-validator/validator?warning=1&amp;profile=none&amp;usermedium=all&amp;text='

((ENV['TM_SELECTED_TEXT'].size &gt; 0) ?
  ENV['TM_SELECTED_TEXT'] : \$&lt; ).each_byte do |b|
  
  if b == 32
    print '+'
  elsif b.chr =~ /\w/
    print b.chr
  else
    printf '%%%02x', b
  end
end

puts '#errors\"&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;' "</string>
	<key>input</key>
	<string>document</string>
	<key>keyEquivalent</key>
	<string>^V</string>
	<key>name</key>
	<string>Validate Selected CSS</string>
	<key>output</key>
	<string>showAsHTML</string>
	<key>uuid</key>
	<string>45E5E5A1-84CC-11D9-970D-0011242E4184</string>
</dict>
</plist>
